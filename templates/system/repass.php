<?php
/*=============================================================================
#
#                           ``--:-` 
#                          `-/+ooo+:.
#                         .:+sssssss+-         MatrixWebEngine  V:1.0 
#                        .:+sooossssso:
#                       `-++:--:/osssso.
#                      `.:/:-oysysossss+`        `````````
#                      `-::.yy` `ohosss+- ``..---:::::::::-.
#                      .-..od`    hhssso/----------::::///::`
#  ``...------......```.-..ms-:+shhs+ooo/--:://++/---::////:`
#.-::::::::-----------....-+shdhyyyssddy+:yhs/---os--:////:.
#.::::::/:::---/++oooo-|yhhhhhyyyyyyshm|y+|hhh. `yo-:///::.
# `-:::/++//:::hh+:-/N:|h|yhdhyyyyyyy|N|y+|hhsooso:////:-`
#   `.-://+++///oyyoyo.|y|sh|shhhh|hs|N|h/|ys-----///:-.
#      `.-://++++///---|y|oy|sh|hh|o+|m|y/|so...-:-:-.-..`
#          `.-:/:////-.|s|+s|os|hh|++|s|+-|//:/:::-::------..`
#            ``..-:-.--+y|od|ys|o+|oo|m|:-`:/:::/oo/os+--------.`
#          ``.----`:yd:-+|/+|ss|y+|.:|:|oh:---:shyoooys--:::-::---`
#         `.--:--.oh.do./++s|+/|.`|..:ydmh+-+////////////////:::---.
#        `-::::---N/`yy..../so/+/++/.:///+/::::///////+++++//:::---.
#      ..://:::---+ssys.-:-.//+o++//--/os+:``````....---------..``  
#     .-:///:::///:////:+o/-:////+shossss/: 
#    .-::////////////////o+:.:shyyNyosssso-     
#    .-::///////////////-::-..+ysyoosssss+.
#    `.-::////////::-..``.:/:..--:ossssss/      Rel Date: 24/04/2014
#       ``.....```       .-:/+o+ossssssso-
#                        `.-:+ssssssssso:
#                         `.-/sssssssso/`
#                          `.-:+sssss+/`
#                            `-://///-`
#                             ``.--.` 
#
#==============================================================================
#
#		   File: repass.php			   Version: 1.0
#
#          Author: Jerome 'PsYkhAzE aka The_Architekt' KASPER
#
#          Licence: GPL V3
#
#		   Description : Password Update Interface
#
#		   GET Parameters: id, token
#
#============================================================================*/

   	$user_id = intval(filter_input(INPUT_GET, 'id', FILTER_SANITIZE_STRING));
	$token = filter_input(INPUT_GET, 'token', FILTER_SANITIZE_STRING);   
	$dbtoken=get_player_token($user_id);

	// Mise en Forme
	echo '<div id="repass">';
	if ($token!=$dbtoken)
	{
		echo "Invalid Request";
	}
	else
	{
		echo '<form  action="modules/repassvalid.php" method="post" id="repassform">';
		echo '<input type="hidden" name="id" value="'.$user_id.'">';
		echo 'Password ?<input type="password" name="passwordv" id="passwordv"><br><br>';
		echo 'Password again?<input type="password" name="passwordv2" id="passwordv2"><br><br>';
		echo '<input type="submit" id="validnewpass" value="Valid">';
		echo '</form>';
	}
?>
</div>
<script type="text/JavaScript">
$(function() {
$( "#validnewpass" ).button();
});
</script>